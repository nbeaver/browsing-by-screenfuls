<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type"
    content="text/html; charset=us-ascii">
<title>Page-Padding Sandbox</title>
<link rel="stylesheet" href="sandbox.css">
<script type="text/javascript" >
  var NumberOfScrollEvents = 0;
  var NumberOfCaughtScrollEvents = 0;
  document.addEventListener("DOMContentLoaded", load, false);
  //add event listener to scrolling
  function load() {
    window.addEventListener("scroll", ScrollingDetected, false);
    // create a new div element and give it some content
    var newDiv = document.createElement("div");
    newDiv.setAttribute("id", "pagePadder")
    //newDiv.innerHTML += "~<br>"; //test to make sure the div can be modified
    document.body.appendChild(newDiv);
  }
  function ScrollingDetected() {
    NumberOfScrollEvents++;
    //Sadly, window.scrollMaxY is not cross-browser and is erratic in Firefox
    var pixelsBelow = document.documentElement.scrollHeight - document.documentElement.clientHeight - document.documentElement.scrollTop;
    var pixelsPerPgDn = window.innerHeight
    if (pixelsBelow < pixelsPerPgDn) {
      //var newContent = document.createTextNode("Bottoming out:pageYOffset="+window.pageYOffset+" innerHeight="+window.innerHeight+" scrollMaxY="+window.scrollMaxY+" Scroll events detected="+NumberOfScrollEvents+"\n");
      //var newContent = "Bottoming out:pageYOffset="+window.pageYOffset+" innerHeight="+window.innerHeight+" scrollMaxY="+window.scrollMaxY+" Scroll events detected="+NumberOfScrollEvents+"<br>";
      newContent = Array(11).join("~<br>"); //ten lines of tildes
      pagePadderDiv = document.getElementById('pagePadder');
      pagePadderDiv.innerHTML += newContent; 
      NumberOfCaughtScrollEvents++;
    //TODO: what should be added to pad the bottom? CSS adjustments? A bunch of tildes?
    }
  }
  function windowVals() {
    var pixelsBelow = document.documentElement.scrollHeight - document.documentElement.clientHeight - document.documentElement.scrollTop;
    var pixelsPerPgDn = window.innerHeight
    return "pixelsBelow =" + pixelsBelow + " pixelsPerPgDn = "+ pixelsPerPgDn;
  }
  function scrollEvents() {
    return "NumberOfScrollEvents="+NumberOfScrollEvents+" NumberOfCaughtScrollEvents="+NumberOfCaughtScrollEvents;
  }
</script>
</head>
<body>
<h2>
    CHAPTER I. THE TWO POETS OF SAFFRON PARK
</h2>
<button onclick="alert(scrollEvents())">ScrollEvents</button> 
<button onclick="alert(windowVals())">Window values</button> 
<p>
THE suburb of Saffron Park lay on the sunset side of London, as red and
ragged as a cloud of sunset. It was built of a bright brick throughout;
its sky-line was fantastic, and even its ground plan was wild. It had
been the outburst of a speculative builder, faintly tinged with art, who
called its architecture sometimes Elizabethan and sometimes Queen Anne,
apparently under the impression that the two sovereigns were identical.
It was described with some justice as an artistic colony, though
it never in any definable way produced any art. But although its
pretensions to be an intellectual centre were a little vague, its
pretensions to be a pleasant place were quite indisputable. The stranger
who looked for the first time at the quaint red houses could only think
how very oddly shaped the people must be who could fit in to them. Nor
when he met the people was he disappointed in this respect. The place
was not only pleasant, but perfect, if once he could regard it not as a
deception but rather as a dream. Even if the people were not "artists,"
the whole was nevertheless artistic. That young man with the long,
auburn hair and the impudent face&mdash;that young man was not really a poet;
but surely he was a poem. That old gentleman with the wild, white
beard and the wild, white hat&mdash;that venerable humbug was not really a
philosopher; but at least he was the cause of philosophy in others.
That scientific gentleman with the bald, egg-like head and the bare,
bird-like neck had no real right to the airs of science that he assumed.
He had not discovered anything new in biology; but what biological
creature could he have discovered more singular than himself? Thus, and
thus only, the whole place had properly to be regarded; it had to be
considered not so much as a workshop for artists, but as a frail but
finished work of art. A man who stepped into its social atmosphere felt
as if he had stepped into a written comedy.
</p>
<button onclick="alert(windowVals())">Window values</button> 
<p>
More especially this attractive unreality fell upon it about nightfall,
when the extravagant roofs were dark against the afterglow and the whole
insane village seemed as separate as a drifting cloud. This again was
more strongly true of the many nights of local festivity, when the
little gardens were often illuminated, and the big Chinese lanterns
glowed in the dwarfish trees like some fierce and monstrous fruit.
And this was strongest of all on one particular evening, still vaguely
remembered in the locality, of which the auburn-haired poet was the
hero. It was not by any means the only evening of which he was the hero.
On many nights those passing by his little back garden might hear his
high, didactic voice laying down the law to men and particularly
to women. The attitude of women in such cases was indeed one of the
paradoxes of the place. Most of the women were of the kind vaguely
called emancipated, and professed some protest against male supremacy.
Yet these new women would always pay to a man the extravagant compliment
which no ordinary woman ever pays to him, that of listening while he
is talking. And Mr. Lucian Gregory, the red-haired poet, was really (in
some sense) a man worth listening to, even if one only laughed at the
end of it. He put the old cant of the lawlessness of art and the art
of lawlessness with a certain impudent freshness which gave at least a
momentary pleasure. He was helped in some degree by the arresting oddity
of his appearance, which he worked, as the phrase goes, for all it
was worth. His dark red hair parted in the middle was literally like a
woman's, and curved into the slow curls of a virgin in a pre-Raphaelite
picture. From within this almost saintly oval, however, his face
projected suddenly broad and brutal, the chin carried forward with a
look of cockney contempt. This combination at once tickled and terrified
the nerves of a neurotic population. He seemed like a walking blasphemy,
a blend of the angel and the ape.
</p>
<button onclick="alert(windowVals())">Window values</button> 
<p>
This particular evening, if it is remembered for nothing else, will be
remembered in that place for its strange sunset. It looked like the
end of the world. All the heaven seemed covered with a quite vivid and
palpable plumage; you could only say that the sky was full of feathers,
and of feathers that almost brushed the face. Across the great part of
the dome they were grey, with the strangest tints of violet and mauve
and an unnatural pink or pale green; but towards the west the whole
grew past description, transparent and passionate, and the last red-hot
plumes of it covered up the sun like something too good to be seen. The
whole was so close about the earth, as to express nothing but a violent
secrecy. The very empyrean seemed to be a secret. It expressed that
splendid smallness which is the soul of local patriotism. The very sky
seemed small.
</p>
<button onclick="alert(windowVals())">Window values</button> 

</body>
</html>
